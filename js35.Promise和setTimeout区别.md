new Promise的过程是同步任务，Promise.then是异步微任务，会在主线程执行完后执行，setTimeout是宏任务。
整体代码开始第一次循环，之后全局上下文进入函数调用栈，直到函数调用栈清空，然后执行所有的micro-task，当所有可执行的micro-task执行完毕后。循环再次从macro-task开始