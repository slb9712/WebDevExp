## diff算法
实现主要就是两种patch，核心的逻辑是createElement(第一次创建)和updateChildren(递归遍历所有标签，遇到不一样的就replace)

vue2采用的是双端Diff算法，而vue3采用快速Diff算法。双端diff使用不一样的对比规则对虚拟节点的 type（元素名）和 虚拟节点的key（唯一标识）来区分是否有可以复用的旧节。快速Diff算法也是一样的，不过要比简单Diff和双端Diff多了一步预处理的操作

## 简单diff、
单头对比。ABCD=》DABC要移动ABC三个

diff 算法的目的是根据 key 复用 dom 节点，通过移动节点而不是创建新节点来减少 dom 操作。

对于每个新的 vnode，在旧的 vnode 中根据 key 查找一下，如果没查找到，那就新增 dom 节点，如果查找到了，那就可以复用。

复用的话要不要移动要判断下下标，如果下标在 lastIndex 之后，就不需要移动，因为本来就在后面，反之就需要移动。

最后，把旧的 vnode 中在新 vnode 中没有的节点从 dom 树中删除。



## 双端diff

双端 diff 是头尾指针向中间移动的同时，对比头头、尾尾、头尾、尾头是否可以复用，如果可以的话就移动对应的 dom 节点。

如果头尾没找到可复用节点就遍历 vnode 数组来查找，然后移动对应下标的节点到头部。

最后还剩下旧的 vnode 就批量删除，剩下新的 vnode 就批量新增。 



## 快速diff
在真正进入Diff之前，快速Diff会先执行一段”预处理“的前置操作。目的是先把可以直接排除的项去掉，降低diff的操作量。
会先扫描两组前后内容，建立索引 j ，初始值为0，指向两组子节点的开头或者结尾。开启一个while循环，让索引 j 递增，直至遇到不同的节点为止。从一端找完后再从另一端开始找，处理完所有前置节点和后置节点。
while循环查找所有相同的前置节点，并调用patch函数进行打补丁，直到遇到key值不同的节点为止。这样就完成了对前置节点的预处理。

快速Diff中使用了一个source数组来记录新节的位置索引，并用-1来代表需要新增的节点